// use: mongosh "C:/Users/SEU_USUARIO/Desktop/setup_mongo.js"

// 1) selecionar/criar DB
use sistema_curriculos;

// 2) criar collections explicitamente (Mongo criaria on-demand, mas padronizamos)
db.createCollection("empresas");
db.createCollection("vagas");
db.createCollection("curriculos");

// 3) índices úteis
db.vagas.createIndex({ estado: 1 });
db.vagas.createIndex({ titulo: 1 });
db.vagas.createIndex({ salario: -1 });
db.vagas.createIndex({ habilidades: 1 });
db.curriculos.createIndex({ habilidades: 1 });

// 4) usuário da aplicação com papel dbAdmin
db.createUser({
  user: "app_user",
  pwd: "troque-esta-senha",
  roles: [{ role: "dbAdmin", db: "sistema_curriculos" }]
});

// (opcional) se a sua aplicação também precisará ler/gravar dados, considere:
// roles: [{ role: "dbAdmin", db: "sistema_curriculos" }, { role: "readWrite", db: "sistema_curriculos" }]
